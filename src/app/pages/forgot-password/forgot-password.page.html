<!-- src/app/pages/forgot-password/forgot-password.page.html -->
<ion-content class="login-content" [fullscreen]="true">
  <div class="login-wrapper">

    <div class="logo-section">
      <img src="assets/ars-logo.png" alt="ARS Green Steel" class="logo" />
    </div>

    <div class="auth-card">

      @if (!isSubmitted) {
        <h1 class="auth-title">Forgot Password</h1>
        <p class="auth-subtitle">Sign in to your distributor portal</p>

        <form [formGroup]="form" (ngSubmit)="onSubmit()">

          <div class="field-group">
            <label class="field-label">Dealer ID</label>
            <div class="input-wrapper" [class.error]="dealerId.invalid && dealerId.touched">
              <ion-icon name="person-outline" class="input-icon"></ion-icon>
              <input
                type="text"
                formControlName="dealerId"
                placeholder="123"
                class="ars-input"
              />
            </div>
            @if (dealerId.invalid && dealerId.touched) {
              <span class="field-error">Dealer ID is required</span>
            }
          </div>

          <!-- Info Box -->
          <div class="info-box">
            <p class="info-title">What happens next:</p>
            <p>• We'll send a secure reset link to your email</p>
            <p>• Click the link to create a new password</p>
          </div>

          <button type="submit" class="ars-btn-primary" [disabled]="isLoading">
            @if (isLoading) {
              <ion-spinner name="crescent" color="light"></ion-spinner>
            } @else {
              <ion-icon name="mail-outline"></ion-icon>
              Send an Email
            }
          </button>

        </form>

        <a routerLink="/login" class="back-link">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Return to Sign In
        </a>
      }

      @if (isSubmitted) {
        <div class="success-state">
          <ion-icon name="checkmark-circle-outline" class="success-icon"></ion-icon>
          <h2>Email Sent!</h2>
          <p>A password reset link has been sent to your registered email address.</p>
          <a routerLink="/login" class="ars-btn-primary" style="display:flex;text-decoration:none;margin-top:24px;">
            Return to Sign In
          </a>
        </div>
      }

    </div>

    <p class="copyright">© 2026 ARS Steel. All rights reserved.</p>
  </div>
</ion-content>
